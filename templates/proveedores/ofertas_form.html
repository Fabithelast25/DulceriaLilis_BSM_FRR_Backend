<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>{{ accion }} Oferta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    /* ===== Paleta ===== */
    :root{
      --brand-red:#c8102e;
      --brand-red-700:#a40d25;
      --brand-red-50:#fff5f7;
      --brand-gold:#d4af37;
      --brand-gold-700:#b89617;
      --brand-gold-100:#fcf6e6;
      --ink:#1c1d22;
      --muted:#6b7280;
      --border:#e8e8e8;
      --bg:#ffffff;
      --page:#fafafa;
      --shadow:0 10px 24px rgba(0,0,0,.08);
      --radius:14px;
    }

    html,body{height:100%}
    body{
      background: linear-gradient(180deg, var(--page), #fff);
      margin:0; font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink);
    }

    /* Navbar misma paleta que la lista */
    .navbar{
      background: var(--brand-red) !important;
      box-shadow: 0 8px 18px rgba(200,16,46,.18);
    }
    .navbar-brand{ color:#fff !important; font-weight:800; letter-spacing:.3px; }
    .nav-link{ color:#fff !important; opacity:.95; }
    .nav-link:hover{ opacity:1; text-decoration: underline; text-underline-offset: 4px; }

    /* Contenedor tarjeta */
    .page-wrap{ padding:24px 12px; }
    .card{
      max-width:860px; margin:0 auto; background:var(--bg); border-radius:var(--radius);
      box-shadow:var(--shadow); border:1px solid var(--border); overflow:hidden;
    }
    .card-header{
      display:flex; align-items:center; gap:10px;
      background: linear-gradient(180deg, #fff, var(--brand-gold-100));
      border-bottom:2px solid var(--brand-gold);
      padding:14px 18px; font-weight:800; font-size:1.1rem; color:var(--ink);
    }
    .card-header:before{
      content:""; width:10px; height:22px; border-radius:8px;
      background: linear-gradient(180deg, var(--brand-gold), var(--brand-gold-700));
      box-shadow:0 4px 10px rgba(212,175,55,.25);
    }
    .body{ padding:18px; }

    /* Grid */
    .grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }
    .grid-1{ grid-column:1/-1; }

    /* Campos */
    label{ font-weight:700; margin-bottom:6px; display:block; }
    .form-control, .form-select, textarea{
      width:100%; border:1px solid var(--border); border-radius:10px; padding:10px 12px; background:#fff;
    }
    .form-control:focus, .form-select:focus, textarea:focus{
      border-color: var(--brand-gold); box-shadow: 0 0 0 .2rem rgba(212,175,55,.18);
    }
    .help{ font-size:.9rem; color:var(--muted); margin-top:4px; }
    .field-errors{ color:#8f0c1f; font-weight:600; font-size:.9rem; margin-top:6px; }
    .non-field-errors{
      background:#fff3cd; border:1px solid #ffe08a; color:#7a5b00; padding:10px; border-radius:10px; margin-bottom:12px;
    }

    /* Switch/checkbox preferente alineado */
    .inline-field{ display:flex; align-items:center; gap:10px; padding:10px 12px; border:1px dashed var(--border); border-radius:10px; background:#fff; }
    .inline-field label{ margin:0; font-weight:700; }

    /* Botones marca */
    .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:16px; }
    .btn-gold{
      background: linear-gradient(180deg, var(--brand-gold), var(--brand-gold-700));
      color:#1a1a1a; border:none; border-radius:10px; padding:10px 14px; font-weight:800;
    }
    .btn-gold:hover{ filter:brightness(.95); color:#111; }
    .btn-outline{
      background:#fff; color:var(--brand-red); border:2px solid var(--brand-red); border-radius:10px; padding:9px 14px; font-weight:800;
    }
    .btn-outline:hover{ background:var(--brand-red-50); }

    @media (max-width: 720px){ .grid{ grid-template-columns:1fr; } }
  </style>
</head>
<body>

  {% include "proveedores/navbarProveedores.html" %}

  <div class="page-wrap">
    <div class="card">
      <div class="card-header">{{ accion }} Oferta de Proveedor</div>
      <div class="body">
        <form method="post" novalidate>
          {% csrf_token %}

          {% if form.non_field_errors %}
            <div class="non-field-errors">{{ form.non_field_errors }}</div>
          {% endif %}

          <div class="grid">
            <div>
              <label for="{{ form.producto.id_for_label }}">Producto</label>
              {{ form.producto }}
              {% if form.producto.errors %}<div class="field-errors">{{ form.producto.errors }}</div>{% endif %}
            </div>
            <div>
              <label for="{{ form.proveedor.id_for_label }}">Proveedor</label>
              {{ form.proveedor }}
              {% if form.proveedor.errors %}<div class="field-errors">{{ form.proveedor.errors }}</div>{% endif %}
            </div>

            <div>
              <label for="{{ form.costo.id_for_label }}">Costo</label>
              {{ form.costo }}
              <div class="help">Usa punto para decimales (ej.: 1234.56).</div>
              {% if form.costo.errors %}<div class="field-errors">{{ form.costo.errors }}</div>{% endif %}
            </div>
            <div>
              <label for="{{ form.lead_time_dias.id_for_label }}">Lead time (días)</label>
              {{ form.lead_time_dias }}
              <div class="help">No negativo.</div>
              {% if form.lead_time_dias.errors %}<div class="field-errors">{{ form.lead_time_dias.errors }}</div>{% endif %}
            </div>

            <div>
              <label for="{{ form.min_lote.id_for_label }}">Mínimo de lote</label>
              {{ form.min_lote }}
              <div class="help">Mayor que 0.</div>
              {% if form.min_lote.errors %}<div class="field-errors">{{ form.min_lote.errors }}</div>{% endif %}
            </div>
            <div>
              <label for="{{ form.descuento_pct.id_for_label }}">Descuento (%)</label>
              {{ form.descuento_pct }}
              <div class="help">0 a 100 (opcional).</div>
              {% if form.descuento_pct.errors %}<div class="field-errors">{{ form.descuento_pct.errors }}</div>{% endif %}
            </div>

            <div class="grid-1">
              <div class="inline-field">
                {{ form.preferente }}
                <label for="{{ form.preferente.id_for_label }}">Proveedor preferente</label>
              </div>
              {% if form.preferente.errors %}<div class="field-errors">{{ form.preferente.errors }}</div>{% endif %}
            </div>
          </div>

          <div class="actions">
            <a class="btn btn-outline" href="{% url 'lista_ofertas' %}">Cancelar</a>
            <button class="btn btn-gold" type="submit">Guardar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

</body>
</html>
